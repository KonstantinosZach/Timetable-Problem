## Eκπόνηση της εργασίας
__Όνομα__: Γεώργιος-Κωνσταντίνος Ζαχαρόπουλος

## Θέμα εργασίας
Μοντελοποίηση ενός timetable problem (scheduling problem) as CSP problem βασισμένο πάνω στον υπάρχων κώδικα από το
https://github.com/aimacode/aima-python/blob/master/csp.py

### Εκφώνηση

Ο χρονοπρογραμματισμός εξετάσεων (exam timetabling) είναι ένα δύσκολο πρόβλημα
ικανοποίησης περιορισμών το οποίο αφορά τον προγραμματισμό της εξέτασης
συγκεκριμένων μαθημάτων σε συγκεκριμένες ημέρες και ώρες κατά την διάρκεια μιας
εξεταστικής περιόδου. Η εργασία αυτή αφορά την μοντελοποίηση και επίλυση μιας
σχετικά απλής εκδοχής αυτού του προβλήματος με χρήση αλγορίθμων ικανοποίησης
περιορισμών. Το πρόβλημα το οποίο πρέπει να λυθεί ορίζεται τυπικά ως εξής.
Έχουμε να φτιάξουμε το πρόγραμμα της επόμενης εξεταστικής για τα μαθήματα του
τμήματος μας. Τα μαθήματα δίδονται στο αρχείο «Στοιχεία Μαθημάτων» που δίνεται
μαζί με την εργασία (κάποια στοιχεία των μαθημάτων έχουν τροποποιηθεί για τις
ανάγκες της εργασίας). Οι περιορισμοί του προβλήματος είναι:

   * Η εξεταστική περίοδος διαρκεί 21 συνεχόμενες ημέρες (εξετάσεις και το ΣΚ).
   
   * Το κάθε μάθημα έχει διάρκεια εξέτασης 3 ώρες.
   
   * Σε κάθε μέρα της εξεταστικής περιόδου υπάρχουν 3 χρονικές περίοδοι κατά τις
οποίες μπορεί να εξεταστεί ένα μάθημα (9-12, 12-3 και 3-6).

   * Υπάρχει μόνο μία αίθουσα διαθέσιμη για τις εξετάσεις, η οποία χωράει όλους
του φοιτητές για κάθε ένα από τα μαθήματα (συνεπώς, δεν μπορεί να υπάρχουν
δύο ή περισσότερα μαθήματα που εξετάζονται την ίδια ημέρα και ώρα).

   * Τα μαθήματα του ίδιου έτους θα πρέπει να εξετάζονται σε διαφορετικές ημέρες.
   
 * Υπάρχουν κάποια μαθήματα τα οποία έχουν εργαστήριο (δείτε αρχείο). Για τα
μαθήματα αυτά, θα πρέπει η εξέταση του εργαστηρίου να ακολουθεί αμέσως
μετά αυτή της θεωρίας (π.χ. 12-3 Τεχνητή Νοημοσύνη Θεωρία, 3-6 Τεχνητή
Νοημοσύνη Εργαστήριο). Η εξέταση ενός εργαστηρίου γίνεται από τον
καθηγητή του μαθήματος.

 * Κάποια από τα μαθήματα θεωρούνται δύσκολα (δείτε αρχείο). Οι εξετάσεις
δύσκολων μαθήματων πρέπει να απέχουν τουλάχιστον 2 ημέρες μεταξύ τους για
την διευκόλυνση των φοιτητών.

 * Μαθήματα του ίδιου καθηγητή πρέπει να εξετάζονται σε διαφορετικές μέρες.

Να υλοποιήσετε τους αλγόριθμους FC, MAC και MINCONFLICTS και να τους
εφαρμόσετε στο πρόβλημα.

## Εκτέλεση της εργασίας
Για να τρέξουμε την εργασία εκτελούμε την παρακάτω εντολή με τα argumets που θέλουμε:

`python exam_timetabling.py <variable_ordering> <value_ordering> <inference>`

* Στο < variable_ordering > μπορείται να βάλετε:
    * first_unassigned_variable
    * mrv
    * dom_wdeg

* Στο < value_ordering > μπορείται να βάλετε:
    * unordered_domain_values
    * lcv

* Στο < inference > μπορείται να βάλετε:
    * no_inference
    * forward_checking
    * mac

---
Μερικά παραδείγματα εκτέλεσης του προγράμματος:

* `python exam_timetabling.py first_unassigned_variable lcv no_inference`

* `python exam_timetabling.py mrv lcv mac`

* `python exam_timetabling.py dom_wdeg lcv forward_checking`

---

Αλλιώς μπορούμε απλά να εκτελέσουμε την παρακάτω εντολή για να τρέξουμε την min_conflicts():

* `python exam_timetabling.py`

---
## Αξιολόγηση

* ### Χρόνοι εκτέλεσης
| Algorithms /heuristics   | MRV           | Dom/wDeg |
| -------------            |:-------------:|---------:|
| FC                       | 0.105022      | 0.081018 |
| MAC                      | 1.909431      | 1.081243 |

| Min Conflicts | 
| ------------- |
| 0.1110253     |

Παρατηρούμε ότι:

FC-Dom/wdeg < FC-MRV < MAC-Dom/wdeg < Min Conflicts < MAC-MRV

----

* ### Πλήθος κόμβων που επισκεπτόμαστε στο δέντρο αναζήτησης
| Algorithms /heuristics   | MRV           | Dom/wDeg |
| -------------            |:-------------:|---------:|
| FC                       | 43            | 43       |
| MAC                      | 43            | 43       |

| Min Conflicts |
| ------------- |
|    47         |

Παρατηρούμε ότι μόνο η min conflicts χρειάστηκε περισσότερα assignments

---

* ### Πλήθος ελέγχων συνέπειας που πραγματοποιούνται
| Algorithms /heuristics   | MRV           | Dom/wDeg |
| -------------            |:-------------:|---------:|
| FC                       | 68872         | 68906    |
| MAC                      | 1212903       | 920005   |

| Min Conflicts | 
| ------------- |
|    70224      |

Παρατηρούμε ότι:

FC-MRV < FC-Dom/wdeg < Min Conflicts < MAC-Dom/wdeg <  MAC-MRV

----

## Σχόλια υλοποίησης
* Variables: Είναι όλα τα διαφορετικά μαθήματα. Επίσης έχουν προσθεθεί και τα εργαστήρια ως ξεχωριστά μαθήματα.

* Νeighbors: Κάθε μάθημα(variable) έχει ως γείτονες όλες τα άλλα μαθήματα.

* Domains: H κύρια ιδέα είναι ότι κάθε slot χαρακτηρίζεται από ένα αριθμό, δηλαδή 
    * (day 1 time 9-12) -> slot 1
    * (day 1 time 12-15) -> slot 2
    * (day 1 time 15-18) -> slot 3
    * (day 2 time 9-12) -> slot 4 .....
    * (day 21 time 15-18) -> slot 63

Οπότε το domain των variables είναι αυτοί οι αριθμοί που στην ουσία αναπαριστούν τα διαθέσιμα slot πάνω στο πίνακα του προγράμματος. Στα μαθήματα που έχουν εργαστήριο τους έχουν αφαιρεθεί τα slots που βρίσκονται στο τέλος της κάθε ημέρας. Επίσης στα ίδια τα εργαστήρια τους έχουν αφαιρεθεί τα slot που βρίσκονται στην αρχή της κάθε μέρας.

* Constraints: Η varConstraints διαχειρίζεται τους διάφορους περιορισμούς κυρίως με την πράξη mod 3 το οποίο μας βοηθά να δούμε σε ποια από τις 3 χρονικές περιόδους βρίσκεται το μάθημα. Επίσης χρησιμοποιεί και χρήσιμες πληροφορίες που είναι αποθηκευμένες στην varInfo για κάθε μάθημα ξεχωριστά.

## Γενικά σχόλια κώδικα
Όλος ο δικός μου κώδικας βρίσκεται στο exam_timetabling.py. Δεν έχει πειραχθεί το csp.py ή οποιαδήποτε άλλο αρχείο.

Όταν τρέξετε τον κώδικα να έχετε το terminal όσο πιο μεγάλο γίνεται για να εκτυπωθεί όσο καλύτερα γίνεται το τελικό πρόγραμμα. Αμα θέλετε μπορείτε να αλλάξετε την printTimeTable ώστε να εκτυπώνονται σε λιγότερο χώρο τα μαθήματα ή αλλιώς να μικρύνετε τα ονόματα των μαθημάτων για να χωρέσουν εύκολα στην οθόνη.

Έχουν προσθεθεί αρκετά σχόλια στον κώδικα που νομίζω καθιστούν την υλοποίηση σαφή.
